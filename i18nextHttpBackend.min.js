/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/i18next-http-backend@2.4.2/cjs/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=require("./utils.js"),_request=_interopRequireDefault(require("./request.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty(t,e,o){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var getDefaults=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,e,o){return _defineProperty({},e,o||"")},parseLoadPayload:function(t,e){},request:_request.default,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Backend=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.services=e,this.options=o,this.allOptions=n,this.type="backend",this.init(e,o,n)}return _createClass(t,[{key:"init",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=(0,_utils.defaults)(o,this.options||{},getDefaults()),this.allOptions=n,this.services&&this.options.reloadInterval&&setInterval((function(){return e.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(t,e,o){this._readAny(t,t,e,e,o)}},{key:"read",value:function(t,e,o){this._readAny([t],t,[e],e,o)}},{key:"_readAny",value:function(t,e,o,n,r){var i=this,a=this.options.loadPath;"function"==typeof this.options.loadPath&&(a=this.options.loadPath(t,o)),(a=(0,_utils.makePromise)(a)).then((function(a){if(!a)return r(null,{});var s=i.services.interpolator.interpolate(a,{lng:t.join("+"),ns:o.join("+")});i.loadUrl(s,r,e,n)}))}},{key:"loadUrl",value:function(t,e,o,n){var r=this,i="string"==typeof o?[o]:o,a="string"==typeof n?[n]:n,s=this.options.parseLoadPayload(i,a);this.options.request(this.options,t,s,(function(i,a){if(a&&(a.status>=500&&a.status<600||!a.status))return e("failed loading "+t+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return e("failed loading "+t+"; status code: "+a.status,!1);if(!a&&i&&i.message&&i.message.indexOf("Failed to fetch")>-1)return e("failed loading "+t+": "+i.message,!0);if(i)return e(i,!1);var s,l;try{s="string"==typeof a.data?r.options.parse(a.data,o,n):a.data}catch(e){l="failed parsing "+t+" to json"}if(l)return e(l,!1);e(null,s)}))}},{key:"create",value:function(t,e,o,n,r){var i=this;if(this.options.addPath){"string"==typeof t&&(t=[t]);var a=this.options.parsePayload(e,o,n),s=0,l=[],u=[];t.forEach((function(o){var n=i.options.addPath;"function"==typeof i.options.addPath&&(n=i.options.addPath(o,e));var f=i.services.interpolator.interpolate(n,{lng:o,ns:e});i.options.request(i.options,f,a,(function(e,o){s+=1,l.push(e),u.push(o),s===t.length&&"function"==typeof r&&r(l,u)}))}))}}},{key:"reload",value:function(){var t=this,e=this.services,o=e.backendConnector,n=e.languageUtils,r=e.logger,i=o.language;if(!i||"cimode"!==i.toLowerCase()){var a=[],s=function(t){n.toResolveHierarchy(t).forEach((function(t){a.indexOf(t)<0&&a.push(t)}))};s(i),this.allOptions.preload&&this.allOptions.preload.forEach((function(t){return s(t)})),a.forEach((function(e){t.allOptions.ns.forEach((function(t){o.read(e,t,"read",null,null,(function(n,i){n&&r.warn("loading namespace ".concat(t," for language ").concat(e," failed"),n),!n&&i&&r.log("loaded namespace ".concat(t," for language ").concat(e),i),o.loaded("".concat(e,"|").concat(t),n,i)}))}))}))}}}]),t}();Backend.type="backend";var _default=exports.default=Backend;module.exports=exports.default;
//# sourceMappingURL=/sm/a16ff28d0af8eb2a955dbedbb4df08659cfe6e1348050d9d890bac8b98522e09.map